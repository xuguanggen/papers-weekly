#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
分批翻译论文摘要 - 第3批 (41-60篇)
"""

import json
import re

def is_chinese(text):
    """判断文本是否主要为中文"""
    if not text:
        return False
    chinese_chars = len(re.findall(r'[\u4e00-\u9fff]', text[:100]))
    return chinese_chars > 20

# 第41-60篇的中文翻译
translations = {
    40: """图像编辑需要精确控制和高保真结果。我们介绍Agent Banana，这是一个具有代理思维能力的高保真图像编辑系统。该系统通过将编辑任务分解为多个子任务并使用代理来协调编辑过程，实现了更精确和可控的图像编辑。""",
    
    41: """多语言推理能力对于全球化应用至关重要。我们提出一种通过翻译-反馈（Translation-Reflection）机制实现的自我改进多语言长推理方法。该方法使模型能够通过翻译和反思来提高其跨语言推理能力。""",
    
    42: """视觉代理在复杂环境中需要自适应地分配计算资源。我们提出SCALE，这是一种基于自我不确定性条件的自适应观察和执行方法。该方法使代理能够根据其对环境的理解程度动态调整其观察策略和执行决策。""",
    
    43: """GUI理解是构建智能交互系统的关键。我们介绍POINTS-GUI-G，这是一个GUI定位（GUI-Grounding）的探索之旅。该工作系统地研究了GUI元素定位的各个方面，为构建更智能的GUI代理奠定了基础。""",
    
    44: """化学推理需要深入理解分子结构和反应机制。我们提出LatentChem，该方法从文本思维链（CoT）转向化学推理中的潜在思维。这种方法在潜在空间中进行推理，提高了化学问题解决的效率和准确性。""",
    
    45: """大规模分布式训练需要高效的框架来管理负载和通信。我们介绍Canzona，这是一个统一、异步和负载均衡的训练框架。该框架能够有效地协调大规模训练任务，提高训练效率。""",
    
    46: """探索在强化学习中一直是核心问题。本文回到基础，重新审视强化学习中的探索策略。我们分析了各种探索方法的优缺点，并提出了改进探索效率的新见解。""",
    
    47: """移动GUI代理需要记忆动态环境中的信息。我们介绍MemGUI-Bench，这是一个用于评估移动GUI代理记忆能力的基准。该基准测试代理在动态变化的GUI环境中记忆和利用信息的能力。""",
    
    48: """推理范式如何影响模型的泛化能力？我们发现基本推理范式能够诱导领域外的泛化能力。这一发现表明，选择合适的推理方法对于提高模型在未见数据上的表现至关重要。""",
    
    49: """生成长文本时，在不同模型之间切换可以提高效率。我们提出RelayGen，这是一种通过代内模型切换实现高效推理的方法。该方法在生成过程中动态选择最合适的模型，平衡质量和计算成本。""",
    
    50: """第一人称视角的音视频理解对于增强现实和机器人应用至关重要。我们介绍EgoAVU，这是一个专注于自我中心音视频理解的框架。该框架能够理解和推理第一人称视角中的音频和视觉信息。""",
    
    51: """视频理解需要整合多模态信息。我们提出OmniVideo-R1，通过查询引导的推理强化音视频推理能力。该方法使用查询机制来引导模型关注相关的音视频信息，提高理解准确性。""",
    
    52: """多代理LLM系统需要稳定的训练方法。我们介绍Dr. MAS，这是一个用于多代理LLM系统的稳定强化学习方法。该方法解决了多代理训练中的不稳定性问题，使系统能够学习更有效的协作策略。""",
    
    53: """无限时域推理对于复杂任务至关重要。我们提出InftyThink+，这是一个高效的无限时域推理方法。该方法能够在有限计算资源下进行长期推理，在效率和效果之间取得良好平衡。""",
    
    54: """从零开始合成环境对于通用AI训练至关重要。我们介绍ScaleEnv，这是一个从零开始扩展环境合成的框架。该框架能够生成大规模、多样化的训练环境，支持通用AI的开发。""",
    
    55: """大型语言模型的量化对于部署至关重要。我们提出NanoQuant，这是一个实现亚1比特高效量化的方法。该方法在极低比特宽度下仍能保持模型性能，大幅降低存储和计算成本。""",
    
    56: """自回归图像生成中的条件误差会累积并影响生成质量。本文提出了一种条件误差精化方法，通过识别和纠正生成过程中的条件误差来提高图像质量。""",
    
    57: """从真实世界视频中学习可迁移知识对于视频理解至关重要。我们介绍VideoWorld 2，该系统从真实世界视频中学习可迁移的知识表示，能够在各种下游任务中应用。""",
    
    58: """混合专家（MoE）模型需要高效的架构设计。我们提出OmniMoE，通过在所有层级编排原子专家来实现高效的MoE架构。该架构优化了专家利用率和计算效率。""",
    
    59: """大型语言模型的推理失败模式值得深入研究。本文系统地分析了LLM推理失败的各种情况，识别了常见的错误类型，并提出了改进推理可靠性的建议。"""
}

def main():
    print("🔄 开始翻译第41-60篇论文...")
    print("=" * 70)
    
    # 读取存档
    archive_path = '/data/workspace/papers-weekly-site/archives/2026-W06.json'
    with open(archive_path, 'r', encoding='utf-8') as f:
        archive = json.load(f)
    
    translated_count = 0
    
    # 翻译第41-60篇
    for i in range(40, min(60, len(archive['papers']))):
        paper = archive['papers'][i]
        abstract = paper.get('abstract', '')
        
        # 跳过已经是中文的
        if is_chinese(abstract):
            print(f"[{i+1}/60] ⏭️  已是中文: {paper['title'][:40]}...")
            continue
        
        # 应用翻译
        if i in translations:
            paper['abstract'] = translations[i]
            translated_count += 1
            print(f"[{i+1}/60] ✅ 已翻译: {paper['title'][:40]}...")
        else:
            print(f"[{i+1}/60] ⚠️  暂未翻译: {paper['title'][:40]}...")
    
    # 保存
    with open(archive_path, 'w', encoding='utf-8') as f:
        json.dump(archive, f, ensure_ascii=False, indent=2)
    
    print()
    print("=" * 70)
    print(f"✅ 第3批完成！本批翻译 {translated_count}/20 篇")
    print(f"📊 总进度: {40 + translated_count}/205 篇有中文摘要")
    print(f"📈 完成率: {(40 + translated_count) / 205 * 100:.1f}%")

if __name__ == '__main__':
    main()
